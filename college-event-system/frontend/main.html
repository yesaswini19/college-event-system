<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Event System | VVIT</title>
    <style>
        * { box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: Arial, sans-serif; overflow: hidden; }

        .hero {
            width: 100%;
            height: 100vh;
            background: url("vvit.jpg") center center / cover no-repeat;
            background-attachment: fixed;
        }

        .hero-overlay {
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            pointer-events: none;
        }

        #selectionScreen, .form-slide {
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .role-box {
            width: 320px;
            margin: 15px;
            padding: 25px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 22px;
            font-weight: bold;
            border-radius: 10px;
            transition: 0.3s;
            border: 2px solid white;
        }

        .role-box.organizer-bg { background: #002752; }
        .role-box:hover { transform: scale(1.05); }

        .form-slide {
            display: none;
            width: 90%;
            max-width: 500px;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            max-height: 85vh;
            overflow-y: auto;
            text-align: left;
        }

        h2 { margin: 0 0 10px 0; color: #007bff; text-align: center; }
        h4 { margin: 15px 0 5px 0; color: #666; font-size: 13px; text-transform: uppercase; }

        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        button { background: #28a745; color: white; font-weight: bold; border: none; cursor: pointer; }
        .back-btn { background: #6c757d; margin-top: 20px; }
        .dl-btn { background: #ffc107; color: black; }

        hr { margin: 20px 0; border: 0; border-top: 1px solid #eee; }
    </style>
</head>

<body>

<div class="hero">
    <div class="hero-overlay">

        <div id="selectionScreen">
            <h1>Vasireddy Venkatadri Institute of Technology</h1>
            <p>Event Registration System</p>
            <div class="role-box" onclick="showSlide('studentSlide')">STUDENT</div>
            <div class="role-box organizer-bg" onclick="checkOrganizer()">ORGANIZER üîí</div>
        </div>

        <div id="studentSlide" class="form-slide">
            <h2>Student Portal</h2>

            <h4>Add Profile</h4>
            <input id="studentName" placeholder="Full Name">
            <input id="rollNo" placeholder="Roll No">
            <button onclick="addStudent()">Add Student</button>

            <hr>
            <h4>Edit / Update</h4>
            <input id="editStudentId" placeholder="Student ID">
            <input id="editStudentName" placeholder="New Name">
            <input id="editStudentRoll" placeholder="New Roll No">
            <button onclick="editStudent()" style="background:#ffc107; color:black;">Update Student</button>

            <hr>
            <h4>Delete Profile</h4>
            <input id="deleteStudentId" placeholder="Student ID to remove">
            <button onclick="deleteStudent()" style="background:#dc3545;">Delete Student</button>

            <hr>
            <h4>Register for Event</h4>
            <input id="studentId" placeholder="Your Student ID">
            <select id="eventSelect"><option>-- Select Event --</option></select>
            <button onclick="registerEvent()" style="background:#007bff;">Register</button>

            <button class="back-btn" onclick="showSlide('selectionScreen')">‚Üê Back</button>
        </div>

        <div id="organizerSlide" class="form-slide">
            <h2>Organizer Portal</h2>

            <h4>Create Event</h4>
            <input id="eventTitle" placeholder="Title">
            <input id="eventDesc" placeholder="Description">
            <input id="eventDate" type="date">
            <button onclick="addEvent()">Add Event</button>

            <hr>
            <h4>Manage Events</h4>
            <select id="deleteEventSelect"><option>-- Select Event --</option></select>
            <button onclick="deleteEvent()" style="background:#dc3545;">Delete Event</button>

            <hr>
            <h4>Downloads & Reports</h4>
            <button class="dl-btn" onclick="downloadCSV()">üì• Download All Registrations</button>
            <button style="background:#17a2b8" onclick="viewRegistrations()">View List</button>
            <ul id="list" style="padding:0; list-style:none;"></ul>

            <!-- ================= NEW ADDITION (ONLY CHANGE) ================= -->
            <h4>Download Event-wise CSV</h4>
            <select id="csvEventSelect"></select>
            <button onclick="downloadCSVByEvent()">Download CSV</button>
            <!-- =============================================================== -->

            <button class="back-btn" onclick="showSlide('selectionScreen')">‚Üê Back</button>
        </div>

    </div>
</div>

<script src="script.js"></script>
<script>
    function showSlide(slideId) {
  document.getElementById('selectionScreen').style.display = 'none';
  document.getElementById('studentSlide').style.display = 'none';
  document.getElementById('organizerSlide').style.display = 'none';
  document.getElementById(slideId).style.display = 'flex';

  if(slideId === 'studentSlide') loadEventsForStudents();
  if(slideId === 'organizerSlide') {
    loadEventsForOrganizer();
    loadEventsForCSV(); // ‚úÖ ADD THIS LINE ONLY
  }
}


    function checkOrganizer() {
        if (prompt("Enter Password:") === "admin123") showSlide('organizerSlide');
        else alert("Denied");
    }
</script>

</body>
</html>
